---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProductPage from '../components/ProductPage.astro';
import { getProductBySlug, products } from '../data/products';

export function getStaticPaths() {
	return products.map((product) => ({
		params: { slug: product.slug }
	}));
}

const product = getProductBySlug(Astro.params.slug || '');

if (!product) {
	return Astro.redirect('/404');
}
---

<BaseLayout
	title={product.title}
	description={product.description}
	image={product.imageSrc.src}
>
	<ProductPage product={product} />
</BaseLayout>

